webpackJsonp([1],{"0jG4":function(t,e,a){"use strict";var n=a("Zrlr"),i=a.n(n),s=a("wxAW"),o=a.n(s),r=a("//Fk"),l=a.n(r),c=a("mtWM"),d=a.n(c);d.a.defaults.headers["Content-Type"]="application/json;charset=UTF-8";var u=d.a.create({timeout:5e3});u.interceptors.request.use(function(t){return t},function(t){console.log(t)}),u.interceptors.response.use(function(t){return t},function(t){return l.a.reject(t)});var m=u,v=new(function(){function t(){i()(this,t)}return o()(t,[{key:"queryInstances",value:function(t){return m({url:"/instance",method:"get",params:t})}}]),t}()),p=new(function(){function t(){i()(this,t)}return o()(t,[{key:"queryRateLimits",value:function(t){return m({url:"/ratelimit",method:"get",params:t})}},{key:"addRecord",value:function(t){return m({url:"/ratelimit",method:"post",data:t})}},{key:"editRecord",value:function(t){return m({url:"/ratelimit",method:"put",data:t})}},{key:"deleteRecord",value:function(t){return m({url:"/ratelimit/"+t,method:"delete"})}}]),t}());a.d(e,"a",function(){return v}),a.d(e,"b",function(){return p})},"6bkD":function(t,e){},AMs3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("0jG4"),i={name:"instanceList",data:function(){return{queryObject:{applicationName:"",identity:"",ip:"",keywords:""},pageResult:{list:[]}}},mounted:function(){this.queryInstances()},computed:{routes:function(){return this.$router.options.routes}},methods:{queryInstances:function(){var t=this;n.a.queryInstances(this.queryObject).then(function(e){t.pageResult=e.data.data})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},[a("h1",{staticClass:"h4"},[t._v(t._s(t.$t("menu.instanceList")))])]),t._v(" "),a("form",{staticClass:"row col-3"},[a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v(t._s(t.$t("commons.keyword")))])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryObject.keywords,expression:"queryObject.keywords"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("applicationOverview.input.keyword")},domProps:{value:t.queryObject.keywords},on:{input:function(e){e.target.composing||t.$set(t.queryObject,"keywords",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:t.queryInstances}},[t._v(t._s(t.$t("commons.search"))+"\n        ")])])])]),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-hover table-bordered",staticStyle:{"table-layout":"fixed"}},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("applicationOverview.table.applicationName")))]),t._v(" "),a("th",[t._v(t._s(t.$t("applicationOverview.table.identity")))]),t._v(" "),a("th",[t._v(t._s(t.$t("applicationOverview.table.ip")))]),t._v(" "),a("th",[t._v(t._s(t.$t("applicationOverview.table.port")))])])]),t._v(" "),a("tbody",t._l(t.pageResult.list,function(e){return a("tr",[a("td",[t._v(t._s(e.applicationName))]),t._v(" "),a("td",[t._v(t._s(e.identity))]),t._v(" "),a("td",[t._v(t._s(e.ip))]),t._v(" "),a("td",[t._v(t._s(e.port))])])}),0)])])])},staticRenderFns:[]};var o=a("VU/8")(i,s,!1,function(t){a("Hf45")},"data-v-51e9b5b5",null);e.default=o.exports},BiV0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("fZjL"),i=a.n(n),s=a("0jG4"),o=a("K3J8"),r={name:"Modal",props:{formViewName:{type:String}},data:function(){return{modalOption:{title:"",data:{},editFlag:!1},modalWindow:{}}},mounted:function(){this.modalWindow=new o.Modal(document.getElementById("editModal"))},methods:{modalToggle:function(t){this.modalOption=t,this.modalWindow.toggle()},save:function(){var t={data:this.modalOption.data,editFlag:this.modalOption.editFlag};this.$emit("onSave",t)}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal fade",attrs:{id:"editModal"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"staticBackdropLabel"}},[t._v(t._s(t.modalOption.title))]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"modal-body"},[a(t.formViewName,{tag:"component",attrs:{data:t.modalOption.data}})],1),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("button.close")))]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.save}},[t._v(t._s(t.$t("button.save"))+"\n          ")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]};var c={name:"rateLimit",data:function(){return{queryObject:{applicationName:"",identity:"",ip:"",keywords:""},pageResult:{list:[]}}},components:{Modal:a("VU/8")(r,l,!1,function(t){a("6bkD")},"data-v-40573ec4",null).exports,edit:a("SndA").default},mounted:function(){this.queryRateLimits()},methods:{save:function(t){t.editFlag?this.editRecord(t.data):this.addRecord(t.data)},showModal:function(t,e,a){0===i()(e).length&&e.constructor===Object&&(e={scope:"APPLICATION",dimension:"MINUTE",frequency:1,enable:!0}),this.$refs.modal.modalToggle({title:t,data:e,editFlag:a})},queryRateLimits:function(){var t=this;s.b.queryRateLimits(this.queryObject).then(function(e){t.pageResult=e.data.data})},addRecord:function(t){var e=this;s.b.addRecord(t).then(function(t){t.data.success?e.queryRateLimits():alert(t.data.message)})},editRecord:function(t){var e=this;s.b.editRecord(t).then(function(t){t.data.success?e.queryRateLimits():alert(t.data.message)})},deleteRecord:function(t){var e=this;confirm("delete a record? ")&&s.b.deleteRecord(t).then(function(t){e.queryRateLimits()})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{ref:"modal",attrs:{formViewName:"RateLimitEdit"},on:{onSave:t.save}}),t._v(" "),a("div",{staticClass:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},[a("h1",{staticClass:"h4"},[t._v(t._s(t.$t("menu.rateLimit")))]),t._v(" "),a("div",{staticClass:"btn-toolbar mb-2 mb-md-0"},[a("div",{staticClass:"btn-group me-2"},[a("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{type:"button"},on:{click:function(e){t.showModal(t.$t("rateLimit.modal.title"),{},!1)}}},[t._v("\n          "+t._s(t.$t("button.add"))+"\n        ")])])])]),t._v(" "),a("form",{staticClass:"row col-3"},[a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v(t._s(t.$t("commons.keyword")))])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryObject.keywords,expression:"queryObject.keywords"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("rateLimit.input.keyword")},domProps:{value:t.queryObject.keywords},on:{input:function(e){e.target.composing||t.$set(t.queryObject,"keywords",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:t.queryRateLimits}},[t._v(t._s(t.$t("commons.search"))+"\n        ")])])])]),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-hover table-bordered",staticStyle:{"table-layout":"fixed"}},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("rateLimit.table.scope")))]),t._v(" "),a("th",[t._v(t._s(t.$t("rateLimit.table.affectTarget")))]),t._v(" "),a("th",[t._v(t._s(t.$t("rateLimit.table.endpoint")))]),t._v(" "),a("th",[t._v(t._s(t.$t("rateLimit.table.frequency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("rateLimit.table.dimension")))]),t._v(" "),a("th",[t._v(t._s(t.$t("rateLimit.table.enable")))]),t._v(" "),a("th",[t._v(t._s(t.$t("rateLimit.table.createTime")))]),t._v(" "),a("th",[t._v(t._s(t.$t("rateLimit.table.modifyTime")))]),t._v(" "),a("th",[t._v(t._s(t.$t("table.option")))])])]),t._v(" "),a("tbody",t._l(t.pageResult.list,function(e){return a("tr",[a("td",[t._v(t._s(e.scope))]),t._v(" "),a("td",[t._v(t._s(e.affectTarget))]),t._v(" "),a("td",[t._v(t._s(e.endpoint))]),t._v(" "),a("td",[t._v(t._s(e.frequency))]),t._v(" "),a("td",[t._v(t._s(e.dimension))]),t._v(" "),a("td",[a("span",{class:{"text-success":e.enable,"text-danger":!e.enable}},[t._v("\n                 "+t._s(e.enable?t.$t("commons.enabled"):t.$t("commons.disabled"))+"\n         ")])]),t._v(" "),a("td",[t._v(t._s(t._f("dateFormat")(e.createTime)))]),t._v(" "),a("td",[t._v(t._s(t._f("dateFormat")(e.modifyTime)))]),t._v(" "),a("td",[a("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group"}},[a("button",{staticClass:"btn btn btn-outline-success",on:{click:function(a){t.showModal(t.$t("rateLimit.modal.title"),e,!0)}}},[t._v("\n              "+t._s(t.$t("commons.edit"))+"\n            ")]),t._v(" "),a("button",{staticClass:"btn btn btn-outline-danger",on:{click:function(a){return t.deleteRecord(e.id)}}},[t._v(t._s(t.$t("commons.delete"))+"\n            ")])])])])}),0)])])],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(t){a("qDE/")},"data-v-5cdb9e95",null);e.default=u.exports},Hf45:function(t,e){},Hm6G:function(t,e){},N4h9:function(t,e){t.exports={menu:{instanceList:"应用概览",rateLimit:"流量控制"},button:{add:"新增",update:"编辑",delete:"删除",close:"关闭",save:"保存"},table:{option:"操作"},commons:{date:{YEAR:"年",MONTH:"月",DAY:"日",HOUR:"时",MINUTE:"分",SECOND:"秒"},status:"当前状态",keyword:"关键字",search:"查询",enabled:"启用",disabled:"禁用",edit:"编辑",delete:"删除"},applicationOverview:{table:{applicationName:"应用名",identity:"应用标识",ip:"IP",port:"端口"},input:{keyword:"请输入应用名、实例标识、IP"}},rateLimit:{table:{scope:"作用范围",affectTarget:"影响目标",endpoint:"影响端点",frequency:"限流次数",dimension:"时间纬度",enable:"当前状态",createTime:"创建时间",modifyTime:"上次修改"},input:{keyword:"请输入关键字"},modal:{title:"编辑限流规则",scope:"作用范围",APPLICATION:"应用",INSTANCE:"实例",affectTarget:"影响目标",dimension:"时间维度",frequency:"限流次数",endpoint:"限流端点"}}}},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},i,!1,function(t){a("roXu")},null,null).exports,o=a("/ocq"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view",{key:this.viewKey})],1)},staticRenderFns:[]};var l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"position-sticky pt-3"},[a("ul",{staticClass:"nav flex-column"},[a("li",{staticClass:"nav-item"},t._l(t.routes,function(e){return a("router-link",{key:e.path,staticClass:"nav-link",attrs:{to:e.path,"active-class":"active",exact:""}},[t._v("\n        "+t._s(t.$t("menu."+e.name))+"\n      ")])}),1)])])},staticRenderFns:[]},c={name:"Layout",components:{AppMain:a("VU/8")({name:"AppMain",computed:{viewKey:function(){return this.$route.fullPath}}},r,!1,function(t){a("xH1O")},"data-v-4689ebd1",null).exports,SideBar:a("VU/8")({name:"SideBar",computed:{routes:function(){for(var t=[],e=0,a=0;a<this.$router.options.routes.length;a++)"/"!==this.$router.options.routes[a].path&&(t[e]=this.$router.options.routes[a],e++);return t}}},l,!1,null,null,null).exports}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._m(0),this._v(" "),e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("nav",{staticClass:"col-md-2 col-lg-2 d-md-block bg-light sidebar collapse",attrs:{id:"sideBar"}},[e("SideBar")],1),this._v(" "),e("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 px-md-4",attrs:{id:"appMain"}},[e("AppMain")],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("nav",{staticClass:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow"},[e("a",{staticClass:"navbar-brand col-md-3 col-lg-2 mr-0 px-3",attrs:{href:"javascript:"}},[this._v("App Console")]),this._v(" "),e("button",{staticClass:"navbar-toggler position-absolute d-md-none collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])])}]};var u=a("VU/8")(c,d,!1,function(t){a("xnn8")},"data-v-dd120e26",null).exports;n.a.use(o.a);var m=new o.a({routes:[{path:"/",redirect:"/instance",name:"instanceList",component:u},{path:"/instance",name:"instanceList",component:u,children:[{path:"/instance",name:"instanceList",component:function(){return new Promise(function(t){t()}).then(a.bind(null,"AMs3"))}}]},{path:"/ratelimit",name:"rateLimit",redirect:"/ratelimit",component:u,children:[{path:"/ratelimit",name:"ratelimit",component:function(){return new Promise(function(t){t()}).then(a.bind(null,"BiV0"))}}]}]}),v=a("TXmL");a("qb6w"),a("Bb4J");n.a.use(v.a);var p=new v.a({locale:"zh-CN",messages:{"zh-CN":a("N4h9")}}),f=a("PMhf");f.keys().forEach(function(t){var e=f(t);n.a.component(e.default.name,e.default||e)}),n.a.filter("dateFormat",function(t){var e=new Date(t);return e.getFullYear()+"."+(e.getMonth()+1+"").padStart(2,"0")+"."+(e.getDate()+"").padStart(2,"0")+" "+(e.getHours()+"").padStart(2,"0")+":"+(e.getMinutes()+"").padStart(2,"0")+":"+(e.getSeconds()+"").padStart(2,"0")}),n.a.config.productionTip=!1,new n.a({el:"#app",i18n:p,router:m,components:{App:s},template:"<App/>"})},PMhf:function(t,e,a){var n={"./instance/index.vue":"AMs3","./ratelimit/edit.vue":"SndA","./ratelimit/index.vue":"BiV0"};function i(t){return a(s(t))}function s(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(n)},i.resolve=s,t.exports=i,i.id="PMhf"},SndA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"RateLimitEdit",props:{data:{type:Object}},data:function(){return{entity:{scope:"APPLICATION",affectTarget:"",dimension:"MINUTE",frequency:1,endpoint:"",enable:"true"},pageResult:{list:[]}}},mounted:function(){},methods:{},watch:{data:{handler:function(){this.entity=this.data},deep:!0}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"scopeSelector"}},[t._v(t._s(t.$t("rateLimit.modal.scope")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.entity.scope,expression:"entity.scope"}],staticClass:"form-control",attrs:{name:"scopeSelector",id:"scopeSelector"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.entity,"scope",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"APPLICATION"}},[t._v(t._s(t.$t("rateLimit.modal.APPLICATION")))]),t._v(" "),a("option",{attrs:{value:"INSTANCE"}},[t._v(t._s(t.$t("rateLimit.modal.INSTANCE")))])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"affectTarget"}},[t._v(t._s(t.$t("rateLimit.modal.affectTarget")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entity.affectTarget,expression:"entity.affectTarget"}],staticClass:"form-control",attrs:{type:"text",id:"affectTarget",placeholder:t.$t("rateLimit.modal.affectTarget")},domProps:{value:t.entity.affectTarget},on:{input:function(e){e.target.composing||t.$set(t.entity,"affectTarget",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"dimensionSelector"}},[t._v(t._s(t.$t("rateLimit.modal.dimension")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.entity.dimension,expression:"entity.dimension"}],staticClass:"form-control",attrs:{name:"dimensionSelector",id:"dimensionSelector"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.entity,"dimension",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"YEAR"}},[t._v(t._s(t.$t("commons.date.YEAR")))]),t._v(" "),a("option",{attrs:{value:"MONTH"}},[t._v(t._s(t.$t("commons.date.MONTH")))]),t._v(" "),a("option",{attrs:{value:"DAY"}},[t._v(t._s(t.$t("commons.date.DAY")))]),t._v(" "),a("option",{attrs:{value:"HOUR"}},[t._v(t._s(t.$t("commons.date.HOUR")))]),t._v(" "),a("option",{attrs:{value:"MINUTE"}},[t._v(t._s(t.$t("commons.date.MINUTE")))]),t._v(" "),a("option",{attrs:{value:"SECOND"}},[t._v(t._s(t.$t("commons.date.SECOND")))])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"frequency"}},[t._v(t._s(t.$t("rateLimit.modal.frequency")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entity.frequency,expression:"entity.frequency"}],staticClass:"form-control",attrs:{type:"number",id:"frequency",placeholder:t.$t("rateLimit.modal.frequency")},domProps:{value:t.entity.frequency},on:{input:function(e){e.target.composing||t.$set(t.entity,"frequency",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"endpoint"}},[t._v(t._s(t.$t("rateLimit.modal.endpoint")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entity.endpoint,expression:"entity.endpoint"}],staticClass:"form-control",attrs:{type:"text",id:"endpoint",placeholder:t.$t("rateLimit.modal.endpoint")},domProps:{value:t.entity.endpoint},on:{input:function(e){e.target.composing||t.$set(t.entity,"endpoint",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"enableSelector"}},[t._v(t._s(t.$t("commons.status")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.entity.enable,expression:"entity.enable"}],staticClass:"form-control",attrs:{name:"enableSelector",id:"enableSelector"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.entity,"enable",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"true"}},[t._v(t._s(t.$t("commons.enabled")))]),t._v(" "),a("option",{attrs:{value:"false"}},[t._v(t._s(t.$t("commons.disabled")))])])])])])},staticRenderFns:[]};var s=a("VU/8")(n,i,!1,function(t){a("Hm6G")},"data-v-a5734430",null);e.default=s.exports},"qDE/":function(t,e){},qb6w:function(t,e){},roXu:function(t,e){},xH1O:function(t,e){},xnn8:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7db592bae6ac3c8a25f3.js.map